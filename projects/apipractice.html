<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pair project2</title>
    <link href="../css/mainstyle.css" rel="stylesheet" />
    <!-- <script async src="../js/script.js"></script> -->
    <link rel="icon" type="image/png" href="../media/workspace.png" />
    <script></script>
  </head>
  <body>
    <header class="headercontainer">
      <h1>Practice creating API</h1>
      <nav>
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li><a href="../workshops/workshop.html">Exercises</a></li>

          <li><a href="../projects/projectsgallery.html">Projects</a></li>
          <li><a href="../sb-challenges/codechallenges.html">Challenges</a></li>
          <li><a href="../javascript30/js30exercises.html">JavaScript30</a></li>
        </ul>
      </nav>
    </header>
    <section class="center">
      <h2>Practice API</h2>
      <p>Script</p>
      <h3>Film form</h3>

      <form id="tmdbform">
        <label for="id">ID</label>
        <input id="id" name="id" type="number" />
        <br />

        <!-- <label for="title">Film name</label>
        <input id="title" name="title" type="text" />
        <br />

        <label for="release_date">Release date</label>
        <input id="release_date" name="release_date" type="date" />
        <br />

        <label for="genres">Genre</label>
        <input id="genres" name="genres" type="text" />
        <br />

        <label for="popularity">Popularity</label>
        <input id="popularity" name="popularity" type="number" /> -->
        <br />
        <button type="submit">Search</button>
      </form>
      <br />
      <output>The output will be here shortly...</output>
      <br />
      <br />
      <script>
        // fetch("https://pokeapi.co/api/v2/pokemon/ditto", {})
        //  .then((response) =>  console.log(response));

        // fetch("https://pokeapi.co/api/v2/pokemon/ditto", {})
        //   .then((response) => response.json())
        //   .then((data) => console.log(data));

        // fetch("https://pokeapi.co/api/v2/pokemon/ditto", {})
        //   .then((response) => response.text())
        //   .then((data) => console.log(data));

        //handling errors
        // fetch("https://pokeapi.co/api/v2/pokemon/saira", {})
        //   .then((data) => console.log(data))
        //   .catch((error) => console.log("ERROR"));

        // for server errors, because saira pokemon does not exist really need different error catching. to make it work i.e. data.ok try snorlax
        // fetch("https://pokeapi.co/api/v2/pokemon/saira", {}).then((data) => {
        //   if (data.ok) {
        //     console.log("success");
        //   } else {
        //     console.log("whoops, server error");
        //   }
        // });

        // fetch("https://jsonplaceholder.typicode.com/posts", {
        //   method: "POST",
        //   body: JSON.stringify({
        //     title: "New Post",
        //     body: "Some text",
        //     userid: 1,
        //   }),
        //   headers: {
        //     "Content-type": "application/json; charset=UTF-8",
        //   },
        // })
        //   .then((response) => response.json())
        //   .then((json) => console.log(json));

        // console.log(fetch("https://reqres.in/api/users"));

        // fetch("https://reqres.in/api/users")
        // .then((res) => console.log(res));

        // fetch("https://reqres.in/api/users")
        //   .then((res) => res.json())
        //   .then((data) => console.log(data));

        // fetch("https://reqres.in/api/users/23")
        //   .then((res) => res.json())
        //   .then((data) => console.log(data));
        //   //gives 404

        // fetch("https://reqres.in/api/users/", {
        //   method: "POST",
        //   headers: {
        //     "Content-type": "application/json",
        //   },
        //   body: JSON.stringify({
        //     name: "User1",
        //   }),
        // })
        //   // .then((res) => {
        //   //   if (res.ok) {
        //   //     console.log("Success");
        //   //   } else {
        //   //     console.log("Not successfull");
        //   //   }
        //   // })
        //   .then((data) => console.log(data))
        //   .catch((error) => console.log("Error"));

        // variables
        // const filmID = 76341; //this will change
        const filmName = "Superman";
        let filmTitle = "";
        const APIKey = "095c02248bac24e95cec5fc2ad4d586d";
        // const fetchURL = "https://api.themoviedb.org/3/movie/";
        // const connectorTxt = "?api_key=";
        fetch(
          `https://api.themoviedb.org/3/search/movie?api_key=${APIKey}&language=en-US&query=${filmName}&page=1`,
          {
            method: "GET",
          }
        )
          .then((response) => response.json())
          // .then((data) => {
          //   const genresObj = data["genres"];
          //   console.log(genresObj);
          // })
          .then((data) => data.results)
          .then((results) => {
            results.forEach((film) => {
              console.log(film.id);
            });
            // const filmTitle = results["title"];
            // console.log(filmTitle);
            // const filmURL = results[0]["homepage"];
            // console.log(filmURL);
            // const filmDate = results["release_date"].substring(0, 4);
            // console.log(filmDate);
            // const filmScore = results["vote_average"];
            // console.log(filmScore);
            // const filmOverview = results["overview"];
            // console.log(filmOverview);
            // const filmPoster = results["poster_path"];
            // console.log(filmPoster);
          })
          .catch((error) => console.log(error));

        // fetch(
        //   "https://api.themoviedb.org/3/movie/550?api_key=095c02248bac24e95cec5fc2ad4d586d"
        // )
        //   .then((response) => response.json())
        //   .then((response) => console.log(response))
        //   .catch((error) => console.log(error));

        // const form = document.querySelector("tmdbform");
        // const output = document.querySelector("output");

        // form.addEventListener("submit", (event) => {
        //   event.preventDefault();

        //   output.innerHTML = "";

        //   const tmdbformData = new FormData(form);
        //   const filmID = tmdbformData.get("id");
        //   let fullURL = fetchURL + filmID + connectorTxt + APIKey;
        //   console.log(fullURL);
        //   fetch(
        //     `https://api.themoviedb.org/3/movie/${filmID}?api_key=095c02248bac24e95cec5fc2ad4d586d`
        //   )
        //     .then((response) => {
        //       if (!response.ok) throw new Error(response.status);
        //       return response.json();
        //     })
        //     .then((filmData) => {
        //       const heading = document.createElement("h2");
        //       heading.textContent = filmData.filmID; // textContent is like innerHTML
        //       const image = document.createElement("img");
        //       image.src = filmData.sprites.front_default;
        //       image.alt = "";

        //       output.append(heading, image);
        //     })
        //     .catch((error) => {
        //       console.error(error);
        //       if (error.message === "404") {
        //         output.textContent = `Could not find "${pokemonname}"`;
        //       } else {
        //         output.textContent = "Another kind of error.";
        //       }
        //     });
        // });
      </script>
    </section>
    <footer class="center">
      <a href="https://twitter.com/codering2"
        ><i class="fab fa-twitter"></i>@codering2</a
      >
    </footer>
  </body>
</html>
