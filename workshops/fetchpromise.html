<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Challenge | Learn Fetch & Promises</title>
  </head>
  <body>
    <h1>Open the console</h1>
    <script>
      // fetch("https://pokeapi.co/api/v2/pokemon/pikachu").then((response) => {
      //   console.log(response);
      // });

      // console.log(1);
      // setTimeout(() => console.log(2), 1000);
      // console.log(3);

      // console.log(1);
      // setTimeout(() => console.log(2), 0);
      // console.log(3);

      // Challengeone

      // https://learn.foundersandcoders.com/workshops/learn-fetch/#using-fetch
      // const pokemon1 = fetch("https://pokeapi.co/api/v2/pokemon/pikachu");
      // console.log(pokemon1);
      // Promises can be in 3 states:
      //   pending (async code has not finished yet)
      //   fulfilled (expected value is available)
      //   rejected (expected value is not available).

      // Accessing the promise value
      // https://learn.foundersandcoders.com/workshops/learn-fetch/#accessing-the-promise-value
      // const myPokemon = fetch("https://pokeapi.co/api/v2/pokemon/pikachu");
      // myPokemon.then((result) => console.log(result));
      // can be written as:
      // fetch("https://pokeapi.co/api/v2/pokemon/pikachu").then((result) =>
      //   console.log(result)
      // );

      // Challengetwo
      // const myPokeymon = fetch("https://api.astrocats.space/SN2014J/redshift");
      // myPokeymon.then((result) => console.log(result));

      // Accessing the response body
      // https://learn.foundersandcoders.com/workshops/learn-fetch/#accessing-the-response-body

      // fetch("https://api.astrocats.space/SN2014J/redshift").then((response) => {
      //   response.json().then((data) => {
      //     console.log(data);
      //   });
      // });

      //chaining
      // fetch("https://api.astrocats.space/SN2014J/redshift")
      //   .then((response) => response.json())
      //   .then((data) => console.log(data));

      // Challengethree
      // const myPikach = fetch("https://pokeapi.co/api/v2/pokemon/pikachu");
      // myPikach
      //   .then((response) => response.json())
      //   .then((pikachu) => console.log(pikachu));

      // Challengefour
      //error in the url
      // fetch("https://pokeai.co/api/v2/pokemon/pikachu")
      //   .then((response) => response.json())
      //   .then((response) => console.log(response))
      //   .catch((error) => console.log(error));

      // Workshop
      // Task1
      console.log("task 1");
      const getUser = (username) =>
        fetch(`https://api.github.com/users/${username}`)
          .then((response) => response.json())
          // .then((response) => console.log(response))
          .catch((error) => console.log(error));
      getUser("sbhatti534602210");

      // Task2
      console.log("task 2");
      const getRepos = (user) =>
        fetch(user.repos_url)
          .then((response) => response.json())
          .catch((error) => console.log(error));

      getUser("oliverjam")
        .then(getRepos)
        .then(console.log)
        .catch(console.error);
      // didn't work?

      // const getRepos = (user) =>
      //   fetch(user.repos_url).then((response) => response.json());
      // getUser("sbhatti534602210")
      //   .then(getRepos)
      //   .then(console.log)
      //   .catch(console.error); //this also didn't work

      // task3
      console.log("task 3");
      // const promise1 = Promise.resolve(3);
      // const promise2 = 42;
      // const promise3 = new Promise((resolve, reject) => {
      //   setTimeout(resolve, 100, "foo");
      // });
      // Promise.all([promise1, promise2, promise3]).then((values) => {
      //   console.log(values);
      // });

      const promiseSB = getUser("sbhatti534602210");
      const promiseOJ = getUser("oliverjam");
      const promiseH = getUser("hadley");
      Promise.all([promiseSB, promiseOJ, promiseH])
        .then((values) => {
          console.log(values);
        })
        .catch((error) => {
          console.error(error.message);
        });
    </script>
  </body>
</html>
